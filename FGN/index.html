<head>
  <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase.js"></script>

  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyCGuBfj3Op2I37aPjGJeltOFiBjd7TfJAo",
      authDomain: "dev-voice-226818.firebaseapp.com",
      databaseURL: "https://dev-voice-226818.firebaseio.com",
      projectId: "dev-voice-226818",
      storageBucket: "dev-voice-226818.appspot.com",
      messagingSenderId: "758189606771",
      appId: "1:758189606771:web:cd4a6f9122a5163fdfe706",
      measurementId: "G-KXWTP1HXQ4"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
  </script>

  <script>
    var provider = new firebase.auth.GoogleAuthProvider();
    function save(a){
      console.log('ahh')
      if(firebase.auth().currentUser){var u = firebase.auth().currentUser}else{alert('pls sign in ok?');return}
      const user = firebase.auth().currentUser;
      user.updateProfile({displayName:a})
      firebase.database().ref('userData/'+user.uid+"/username").set(a);
      firebase.database().ref('chat/users/'+user.uid+"/name").set(a);
    }
    function action(g,a,v){
      console.log('bee')
      if(firebase.auth().currentUser){var user = firebase.auth().currentUser}else{alert('pls sign in ok?');return}
      firebase.database().ref('NekaEarn/users/'+firebase.auth().currentUser.uid+"/actions/"+g).get().then((snapshot) => {
        if (snapshot.exists()) {
          alert("Offer Already Completed")
        } else {
          firebase.database().ref('NekaEarn/users/'+user.uid+"/actions/"+g).set({time:new Date(),site:a,value:v});
          var updates = {}
          var uid = firebase.auth().currentUser.uid;
          updates["userData/"+uid+"/wallet/niKoin"] = firebase.database.ServerValue.increment(v);
          firebase.database().ref().update(updates);
          window.open(a)
        }
      })
      
    }
    function offercheck(g){
      console.log('cee')
      if(firebase.auth().currentUser){var user = firebase.auth().currentUser}else{return}
      firebase.database().ref('NekaEarn/users/'+firebase.auth().currentUser.uid+"/actions/"+g).get().then((snapshot) => {
        if (snapshot.exists()) {
          document.getElementById(g).hidden=true
        }
      })
      
    }
    firebase.auth().onAuthStateChanged((user) => {if(user){var uid=user.uid;yee.value=user.displayName||"";}});
    firebase.auth().onAuthStateChanged((user) => {
      if(user){
      firebase.database().ref("userData/"+firebase.auth().currentUser.uid+"/wallet/niKoin").on('value', (snapshot) => {
      var uid = firebase.auth().currentUser.uid;
      const data = snapshot.val();
      palance.innerHTML = (Math.round(data*100000000)/100000000||0)+" niKoin";
      if(data==null){firebase.database().ref("userData/"+uid+"/wallet/niKoin").set(0)}
    })}});
    offercheck("RollerCoin")
  </script>
</head>
<body>
  Sign in with <button onclick="firebase.auth().signInWithPopup(provider)">Google</button> to complete offers<br>
  <input placeholder="Username"id="yee"><button onclick="save(yee.value)">Save</button><br>
  Please use the same Username for all offers<br>
  <button id="palance"></button><br>
  Withdraw at <a href="https://nik.nekavid.club/exchange/">nik</a><br>
  <div style="text-align:center">
    All offer rewards doubled for a limited time only! <span id="offerTime"></span>
    <button id="RollerCoin"onclick="action('RollerCoin','https://rollercoin.com/?r=kig6a25o',100)">RollerCoin <b><del>100</del> 200 niKoin</b></button>
  </div>
</body>
