<!doctype html>
<html>
  <head>
    <script src="https://kit.fontawesome.com/b7efbdf30a.js" crossorigin="anonymous"></script>
    <meta charset='utf-8' />

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>

    <!-- Firechat -->
    <link rel="stylesheet" href="https://cdn.firebase.com/libs/firechat/3.0.1/firechat.min.css" />
    <script src="https://cdn.firebase.com/libs/firechat/3.0.1/firechat.min.js"></script>
    <script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
        apiKey: "AIzaSyCGuBfj3Op2I37aPjGJeltOFiBjd7TfJAo",
        authDomain: "dev-voice-226818.firebaseapp.com",
        databaseURL: "https://dev-voice-226818.firebaseio.com",
        projectId: "dev-voice-226818",
        storageBucket: "dev-voice-226818.appspot.com",
        messagingSenderId: "758189606771",
        appId: "1:758189606771:web:8b255f5a5677c7b4dfe706",
        measurementId: "G-YPTDPDMTB0"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  </head>
  <body> 
    <div class="w3-bar w3-border w3-light-grey">
      <a href="/" class="w3-bar-item w3-button">Home</a>
      <a href="/chat" class="w3-bar-item w3-button w3-blue">Chat</a>
      <a href="/games" class="w3-bar-item w3-button">Games</a>
      <a href="/search" class="w3-bar-item w3-button w3-green w3-right">Neka-GH</a>
      <div class="w3-dropdown-click">
        <button class="w3-button" onclick="myFunction()">
          Neka <i class="fa fa-caret-down"></i>
        </button>
        <div id="demo" class="w3-dropdown-content w3-bar-block w3-card-4">
          <a href="https://000612429.codepen.website/" class="w3-bar-item w3-button">Neka-CP</a>
          <a href="https://neka126.github.io/" class="w3-bar-item w3-button">Neka-GH</a>
        </div>
      </div>
    </div>
    <script>
      function myFunction() {
        var x = document.getElementById("demo");
        if (x.className.indexOf("w3-show") == -1) {
          x.className += " w3-show";
        } else { 
          x.className = x.className.replace(" w3-show", "");
        }
      }
      function login() {
        var provider = new firebase.auth.GoogleAuthProvider();
        firebase.auth().signInWithPopup(provider).catch(function(error) {
          console.log("Error authenticating user:", error);
        });
      }
      function setUserInfo(username){
            var user = firebase.auth().currentUser;
            user.updateProfile({
              displayName: username
            });
      }
      firebase.auth().onAuthStateChanged(function(user) {
        // Once authenticated, instantiate Firechat with the logged in user
        if (user) {
          initChat(user);
        }
      });

      function initChat(user) {
        // Get a Firebase Database ref
        var chatRef = firebase.database().ref("chat");

        // Create a Firechat instance
        var chat = new FirechatUI(chatRef, document.getElementById("firechat-wrapper"));

        // Set the Firechat user
        chat.setUser(user.uid, user.displayName);
      }
    </script>

    <div id="firechat-wrapper">
      <button onclick="login();">Login with Google</button>
    </div>
    <a target="_blank"href="https://forms.sendpulse.com/47c24e3b99/">Subscribe to mailing list for updates</a><br>
    Set Username: <input id="username"><button onclick="setUserInfo(username.value)">Save</button>
  </body>
</html>
